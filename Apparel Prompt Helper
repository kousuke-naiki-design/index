<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apparel AI Prompt Helper</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap');
        body {
            font-family: 'Inter', 'sans-serif';
            background-color: #f8fafc;
        }
        .prompt-card {
            transition: all 0.2s ease;
        }
        .prompt-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        textarea {
            scrollbar-width: thin;
            scrollbar-color: #cbd5e1 #f8fafc;
        }
        textarea::-webkit-scrollbar {
            width: 6px;
        }
        textarea::-webkit-scrollbar-track {
            background: #f8fafc;
        }
        textarea::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 20px;
        }
    </style>
</head>
<body class="p-4 md:p-8 text-slate-800">
    <div class="max-w-5xl mx-auto">
        <!-- Header -->
        <header class="mb-10 text-center">
            <h1 class="text-3xl font-bold text-slate-800 mb-2">Apparel Prompt Helper</h1>
            <div class="text-slate-500 text-sm leading-relaxed">
                <p class="font-medium">アパレル企画のためのAIプロンプト集</p>
                <p>用途に応じたプロンプトの作成サポートツールです。<br>
                ファッションスタジオ/ウェアデザインラボを使う際にご利用ください。</p>
            </div>
        </header>

        <!-- Search & Filter -->
        <div class="mb-8 flex flex-wrap gap-2 justify-center">
            <button onclick="filterCards('all')" class="px-4 py-2 rounded-full bg-slate-800 text-white text-sm font-medium transition-colors">すべて</button>
            <button onclick="filterCards('flat')" class="px-4 py-2 rounded-full bg-white border border-slate-200 text-slate-600 text-sm font-medium hover:bg-slate-50 transition-colors">線画（平絵）作成</button>
            <button onclick="filterCards('product')" class="px-4 py-2 rounded-full bg-white border border-slate-200 text-slate-600 text-sm font-medium hover:bg-slate-50 transition-colors">平置き・物撮り</button>
            <button onclick="filterCards('fabric')" class="px-4 py-2 rounded-full bg-white border border-slate-200 text-slate-600 text-sm font-medium hover:bg-slate-50 transition-colors">柄グラフィック抽出</button>
            <button onclick="filterCards('model')" class="px-4 py-2 rounded-full bg-white border border-slate-200 text-slate-600 text-sm font-medium hover:bg-slate-50 transition-colors">インスピレーション</button>
        </div>

        <!-- Prompt Grid -->
        <div id="promptGrid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Flat Drawing -->
            <div class="prompt-card bg-white p-6 rounded-xl border border-slate-200 flex flex-col justify-between" data-category="flat">
                <div>
                    <div class="flex justify-between items-start mb-4">
                        <span class="bg-blue-100 text-blue-700 text-xs font-bold px-2 py-1 rounded uppercase">線画（平絵）作成</span>
                        <!-- T-shirt Icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 4L4 7V10H6V20H18V10H20V7L17 4H14C14 5.10457 13.1046 6 12 6C10.8954 6 10 5.10457 10 4H7Z" />
                        </svg>
                    </div>

                    <div class="mb-4 space-y-2">
                        <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-wider">対象アイテムの指定</label>
                        <div class="flex flex-col gap-2">
                            <select id="itemSelect-flat" onchange="updateItemFromSelect('flat')" class="w-full bg-slate-50 border border-slate-200 text-slate-900 text-xs rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2">
                                <option value="">アイテムを選択</option>
                                <option value="セーター">セーター</option>
                                <option value="カーディガン">カーディガン</option>
                                <option value="ニットシャツ">ニットシャツ</option>
                                <option value="ポロシャツ">ポロシャツ</option>
                                <option value="ジャケット">ジャケット</option>
                                <option value="フーディー">フーディー</option>
                                <option value="シャツ">シャツ</option>
                                <option value="パンツ">パンツ</option>
                                <option value="デニム">デニム</option>
                                <option value="Tシャツ">Tシャツ</option>
                            </select>
                            <input type="text" id="customItem-flat" oninput="updateSpecificPrompt('flat')" placeholder="自由入力 (例: トレンチコート)" class="w-full bg-slate-50 border border-slate-200 text-slate-900 text-xs rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2">
                        </div>
                    </div>
                </div>

                <div>
                    <div class="flex justify-between items-end mb-1">
                        <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-wider">プロンプト編集</label>
                        <button onclick="resetPrompt('flat')" class="text-[10px] text-blue-500 hover:text-blue-700 font-bold transition-colors">リセット</button>
                    </div>
                    <textarea id="display-flat" class="w-full bg-slate-50 p-3 rounded border border-slate-100 mb-4 h-64 text-[10px] text-slate-600 leading-normal focus:bg-white focus:ring-1 focus:ring-blue-200 outline-none resize-none transition-all"></textarea>
                    <button onclick="handleCopy('flat')" class="w-full bg-[#18ABA0] hover:opacity-90 text-white py-2.5 rounded-lg font-medium transition-all flex items-center justify-center gap-2">
                        <span>プロンプトをコピー</span>
                    </button>
                </div>
            </div>

            <!-- Flat Lay -->
            <div class="prompt-card bg-white p-6 rounded-xl border border-slate-200 flex flex-col justify-between" data-category="product">
                <div>
                    <div class="flex justify-between items-start mb-4">
                        <span class="bg-green-100 text-green-700 text-xs font-bold px-2 py-1 rounded uppercase">平置き・物撮り</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                        </svg>
                    </div>

                    <div class="mb-4 space-y-2">
                        <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-wider">対象アイテムの指定</label>
                        <div class="flex flex-col gap-2">
                            <select id="itemSelect-product" onchange="updateItemFromSelect('product')" class="w-full bg-slate-50 border border-slate-200 text-slate-900 text-xs rounded-lg focus:ring-green-500 focus:border-green-500 block p-2">
                                <option value="">アイテムを選択</option>
                                <option value="セーター">セーター</option>
                                <option value="カーディガン">カーディガン</option>
                                <option value="ニットシャツ">ニットシャツ</option>
                                <option value="ポロシャツ">ポロシャツ</option>
                                <option value="ジャケット">ジャケット</option>
                                <option value="フーディー">フーディー</option>
                                <option value="シャツ">シャツ</option>
                                <option value="パンツ">パンツ</option>
                                <option value="デニム">デニム</option>
                                <option value="Tシャツ">Tシャツ</option>
                            </select>
                            <input type="text" id="customItem-product" oninput="updateSpecificPrompt('product')" placeholder="自由入力 (例: スラックス)" class="w-full bg-slate-50 border border-slate-200 text-slate-900 text-xs rounded-lg focus:ring-green-500 focus:border-green-500 block p-2">
                        </div>
                    </div>
                </div>

                <div>
                    <div class="flex justify-between items-end mb-1">
                        <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-wider">プロンプト編集</label>
                        <button onclick="resetPrompt('product')" class="text-[10px] text-green-500 hover:text-green-700 font-bold transition-colors">リセット</button>
                    </div>
                    <textarea id="display-product" class="w-full bg-slate-50 p-3 rounded border border-slate-100 mb-4 h-64 text-[10px] text-slate-600 leading-normal focus:bg-white focus:ring-1 focus:ring-green-200 outline-none resize-none transition-all"></textarea>
                    <button onclick="handleCopy('product')" class="w-full bg-[#18ABA0] hover:opacity-90 text-white py-2.5 rounded-lg font-medium transition-all flex items-center justify-center gap-2">
                        <span>プロンプトをコピー</span>
                    </button>
                </div>
            </div>

            <!-- Fabric Texture (Pattern Graphic) -->
            <div class="prompt-card bg-white p-6 rounded-xl border border-slate-200 flex flex-col justify-between" data-category="fabric">
                <div>
                    <div class="flex justify-between items-start mb-4">
                        <span class="bg-purple-100 text-purple-700 text-xs font-bold px-2 py-1 rounded uppercase">柄グラフィック抽出</span>
                        <!-- Pattern/Fabric Icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H5a1 1 0 01-1-1v-4zM14 15a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z" />
                        </svg>
                    </div>

                    <div class="mb-4 space-y-2">
                        <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-wider">対象アイテムの指定</label>
                        <div class="flex flex-col gap-2">
                            <select id="itemSelect-fabric" onchange="updateItemFromSelect('fabric')" class="w-full bg-slate-50 border border-slate-200 text-slate-900 text-xs rounded-lg focus:ring-purple-500 focus:border-purple-500 block p-2">
                                <option value="">アイテムを選択</option>
                                <option value="セーター">セーター</option>
                                <option value="カーディガン">カーディガン</option>
                                <option value="ニットシャツ">ニットシャツ</option>
                                <option value="ポロシャツ">ポロシャツ</option>
                                <option value="ジャケット">ジャケット</option>
                                <option value="フーディー">フーディー</option>
                                <option value="シャツ">シャツ</option>
                                <option value="パンツ">パンツ</option>
                                <option value="デニム">デニム</option>
                                <option value="Tシャツ">Tシャツ</option>
                            </select>
                            <input type="text" id="customItem-fabric" oninput="updateSpecificPrompt('fabric')" placeholder="自由入力 (例: ワンピース)" class="w-full bg-slate-50 border border-slate-200 text-slate-900 text-xs rounded-lg focus:ring-purple-500 focus:border-purple-500 block p-2">
                        </div>
                    </div>
                </div>

                <div>
                    <div class="flex justify-between items-end mb-1">
                        <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-wider">プロンプト編集</label>
                        <button onclick="resetPrompt('fabric')" class="text-[10px] text-purple-500 hover:text-purple-700 font-bold transition-colors">リセット</button>
                    </div>
                    <textarea id="display-fabric" class="w-full bg-slate-50 p-3 rounded border border-slate-100 mb-4 h-64 text-[10px] text-slate-600 leading-normal focus:bg-white focus:ring-1 focus:ring-purple-200 outline-none resize-none transition-all"></textarea>
                    <button onclick="handleCopy('fabric')" class="w-full bg-[#18ABA0] hover:opacity-90 text-white py-2.5 rounded-lg font-medium transition-all flex items-center justify-center gap-2">
                        <span>プロンプトをコピー</span>
                    </button>
                </div>
            </div>

            <!-- Inspiration Section -->
            <div class="prompt-card bg-white p-6 rounded-xl border border-slate-200 flex flex-col justify-between" data-category="model">
                <div>
                    <div class="flex justify-between items-start mb-4">
                        <span class="bg-orange-100 text-orange-700 text-xs font-bold px-2 py-1 rounded uppercase">インスピレーション</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                        </svg>
                    </div>
                    
                    <div class="mb-4 space-y-3">
                        <div class="flex justify-between items-end">
                            <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-wider">アイテム指定 / 数量</label>
                            <span id="ratio-guide" class="text-[10px] font-bold text-orange-600">推奨比率: 3:4</span>
                        </div>
                        
                        <!-- Combined Inputs Row -->
                        <div class="flex gap-2">
                            <div class="flex-1 space-y-2">
                                <select id="itemSelect-model" onchange="updateItemFromSelect('model')" class="w-full bg-slate-50 border border-slate-200 text-slate-900 text-xs rounded-lg focus:ring-orange-500 focus:border-orange-500 block p-2">
                                    <option value="">アイテムを選択</option>
                                    <option value="セーター">セーター</option>
                                    <option value="カーディガン">カーディガン</option>
                                    <option value="ニットシャツ">ニットシャツ</option>
                                    <option value="ポロシャツ">ポロシャツ</option>
                                    <option value="ジャケット">ジャケット</option>
                                    <option value="フーディー">フーディー</option>
                                    <option value="シャツ">シャツ</option>
                                    <option value="パンツ">パンツ</option>
                                    <option value="デニム">デニム</option>
                                    <option value="Tシャツ">Tシャツ</option>
                                </select>
                                <input type="text" id="customItem-model" oninput="updateSpecificPrompt('model')" placeholder="直接入力 (例: ドレス)" class="w-full bg-slate-50 border border-slate-200 text-slate-900 text-xs rounded-lg focus:ring-orange-500 focus:border-orange-500 block p-2">
                            </div>
                            
                            <!-- Simple Count Selector -->
                            <div class="w-20">
                                <select id="itemCount-model" onchange="updateSpecificPrompt('model')" class="w-full h-full bg-orange-50 border border-orange-100 text-slate-900 text-xs rounded-lg focus:ring-orange-500 focus:border-orange-500 block p-2 text-center font-bold">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <div class="flex justify-between items-end mb-1">
                        <label class="block text-[10px] font-bold text-slate-400 uppercase tracking-wider">プロンプト編集</label>
                        <button onclick="resetPrompt('model')" class="text-[10px] text-orange-500 hover:text-orange-700 font-bold transition-colors">リセット</button>
                    </div>
                    <textarea id="display-model" class="w-full bg-slate-50 p-3 rounded border border-slate-100 mb-4 h-64 text-[10px] text-slate-600 leading-normal focus:bg-white focus:ring-1 focus:ring-orange-200 outline-none resize-none transition-all"></textarea>
                    <button onclick="handleCopy('model')" class="w-full bg-[#18ABA0] hover:opacity-90 text-white py-2.5 rounded-lg font-medium transition-all flex items-center justify-center gap-2">
                        <span>プロンプトをコピー</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Feedback Toast -->
        <div id="toast" class="fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-slate-900 text-white px-6 py-3 rounded-full text-sm font-medium opacity-0 transition-opacity pointer-events-none z-50">
            コピーしました！
        </div>

        <!-- Tips Section -->
        <section class="mt-16 bg-slate-100 p-8 rounded-2xl">
            <h2 class="text-xl font-bold text-slate-800 mb-4">AIツールへの使いこなしTips</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div>
                    <h4 class="font-semibold text-slate-700 mb-2">1. プロンプトを直接編集する</h4>
                    <p class="text-xs text-slate-500 leading-relaxed">各ボックス内のテキストは自由に書き換え可能です。「リセット」でいつでも元の指示に戻せます。</p>
                </div>
                <div>
                    <h4 class="font-semibold text-slate-700 mb-2">2. 条件分岐を活用する</h4>
                    <p class="text-xs text-slate-500 leading-relaxed">「インスピレーション」では、コピーしたプロンプトの最後に「20代女性向けのオフィスウェア」のように具体的な方向性を追記して使用してください。</p>
                </div>
                <div>
                    <h4 class="font-semibold text-slate-700 mb-2">3. 画像サイズ・比率の調整</h4>
                    <p class="text-xs text-slate-500 leading-relaxed">用途に適した画像比率（縦長・横長など）をAIツール側で指定しましょう。複数アイテム表示の際は横長が推奨されます。</p>
                </div>
            </div>
        </section>
    </div>

    <script>
        const PROMPTS = {
            flat: `アップロードされた衣服の画像を、プロフェッショナルなテクニカルフラット（仕様書用平絵）に変換してください。衣服の素材に応じてステッチの表現を自動的に調整すること。
【描画スタイル】
Adobe Illustratorで作成されたような、精密で均一な太さの黒いベクター線画。
背景は純粋な白（#FFFFFF）。シェーディング、テクスチャ、影、グラデーションは一切排除すること。
人間やマネキンは含めず、服単体の平置き（フラット）状態を描写すること。
【素材に基づくディテールの指示（最重要）】
アップロードされた衣服が**【ニットアイテム（セーター、カーディガン、ニットシャツ, ポロシャツなど）】**の場合:
ダブルトップステッチ（点線）は適用せず、すべてのシーム、裾、袖口はクリーンな実線のみで描写する。
編み目のテクスチャは省略し、クリーンな形のみを維持する。
カーディガンの場合は、ボタンを詳細に線画で描く。
アップロードされた衣服が**【織物アイテム（ジャケット、フーディー、シャツ, パンツ, デニム, Tシャツなど）】**の場合:
すべてのエッジ、裾、袖口、該当するシームに、サンプル画像のような「細かい点線のダブルステッチ」を正確に描写する。
ジッパー、ボタン、トグル、アイレットを詳細にレンダリングする。
【その他のパーツと全体の指示】
衣服のパネル構造、切り替え線、継ぎ目をすべて正確な線で表現すること。
ジッパーの歯、プルタブ、ボタン、ドローコード、ストッパー、アイレットなどの付属品は、ミニマルかつ詳細に線画で描くこと。
画像中央に配置し、完全な左右対称（正面の場合）、または正確なプロポーションで描くこと。
ロゴやタグが元画像にある場合は、その位置と形状をクリーンな線画として維持すること。
ミニマリズムを徹底し、製造仕様書としてそのまま使えるクオリティで出力すること品質。`,
            product: `アップロードされた人物画像に基づき、その着用している衣服単体のプロフェッショナルな平置き（Flat Lay）商品画像を作成してください。
【全体のスタイルと背景】
人物、マネキン、または着用に関連するすべての要素（頭、腕、脚、靴など）を完全に排除すること。
純粋な白の背景（#FFFFFF）。
均一で影のない、フラットなスタジオ照明。
衣服全体がきれいに平らに、形が崩れないように配置されていること。
【衣服の配置】
アップロードされた衣服の形に基づき、自然かつクリーンに平置きされている。
Tシャツやアウター：袖はきれいに横に伸びているか、またはわずかに内側に折りたたまれている。
パンツ：脚はまっすぐ下に伸びている。
スカートやドレス：自然な広がりで平らに。
【ディテールと素材感】
衣服の素材（織物, ニット, デニム, レザーなど）のリアルなテクスチャを維持すること。
襟、袖口、裾、ポケット、ジッパー、ボタン、ドローコード、アイレットなどのパーツを正確に描写。
縫い目（シーム）やトップステッチを正確に描写。
【仕上げ】
クリーンでミニマルな商品画像。
デフォルトは「ロゴなし」とし、元画像にあれば維持すること。`,
            fabric: `プロフェッショナルなテキスタイルデザイナーとして、アップロードされた衣服の生地の模様、柄（パターン）を特定・抽出し、高品質なグラフィックデータ（ベクターアートスタイル）として再生成してください。
【役割とアクション】
あなたはプロフェッショナルなテキスタイルデザイナーです。ソース画像（人物、衣服、またはディテールカット）内の生地全体に広がるパターン（模様、柄）を特定します。
特定されたパターンを、周囲の生地テクスチャ, シワ, 影, 人物の体から完全に分離・抽出します。
抽出されたパターンを、元のデザインの意図, 色, リピートを正確に維持しつつ、クリーンで鮮明な、高解像度のベクタースタイルのグラフィックアートワークとして再構成します。歪みを修正し、線を平滑化し、色を均一化します。
【抽出対象とクリーンアップのルール（最重要）】
生地テクスチャ排除: 織り目（織物）, ニット目（ニット）, 起毛（フリースなど）などの生地固有のテクスチャを完全に排除します。刺しゅうの場合も、糸のテクスチャ（糸の向きや凹凸）を排除し、それをクリーンな線画またはフラットな色のパターンとして再定義します（刺しゅうの形状と色は維持）。
歪みとシワ修正: シワや体の曲面による歪みを修正し、平滑化された、完璧なパターンデザインとして再定義します。
リピート特定: パターンがリピートする場合、そのリピート単位を特定し、シームレスなタイル（リピートパターン）として再構成します（または、それが不可能な場合は、単一のクリーンなモチーフを表現します）。
【出力スタイルと背景】
Adobe Illustratorで作成されたような、精密で高品質なベクターアートスタイルのグラフィック。
背景は純粋な白（#FFFFFF）。シェーディング、テクスチャ, 影, グラデーションは一切排除すること（フラットデザイン）。
画像中央に配置し、完全な左右対称（該当する場合）、または正確なプロポーションで描くこと。
【仕上げ】
ミニマリズムを徹底し、テキスタイルデザインツールでそのまま再利用できるクオリティで出力すること。`,
            model: `あなたはシニア・ファッションデザイナー兼トレンドアナリストです。アップロードされた画像（1枚または複数）からデザイン要素を深く分析し、以下のルールに従って革新的なデザイン案を生成してください。

【STEP 1：デザインDNAの分析】
アップロードされた画像から以下の要素を特定・維持してください：
シルエットとカット: 衣服の全体的なフォルム、丈感, ボリューム, 切り替えライン。
ディテール: 特徴的なポケット, ステッチ, 襟の形, ジッパーやボタン, コードの仕様。
素材感: 布帛, ニット, レザー, 機能素材などの質感。
エステティック: 元の画像が持つ雰囲気（ミニマル, ストリート, テック, クラシックなど）。

【STEP 2：デザイン案の生成ロジック（条件分岐）】
分析結果に基づき、以下の条件に従って新たなデザインを[COUNT]点提案してください：
【優先ルール】私がこのプロンプトの最後に「デザインの方向性（テーマ、ターゲット、用途の変更など）」を明示的に指定した場合:
その direction 性を反映させ、元の要素と調和させて生成してください。元の魅力と新しい要素を融合させること。
【デフォルトルール】私が方向性を指定しない場合、または「おまかせ」の場合:
アップロードされた画像のテイスト, 素材感, エステティックを完全に維持してください。
その同じコレクションの「バリエーション」や「進化形」としての、正統な新しいデザインを生成してください。元の服の「遺伝子」を色濃く残し、ブランドのアイデンティティを保つこと。
実用的でありながら、次シーズンのコレクションとして成立する創造性を加えること。

【出力形式（画像生成）】
生成される画像は、衣服の構造がはっきりとわかる、プロフェッショナルな商品カタログ、または高解像度のレンダリング画像とすること。
[オプション指示：もし線画を希望された場合] は、白背景の「テクニカルフラット（平絵仕様書）」のスタイルで出力すること。
背景はクリーンなスタジオ背景、または指定された世界観に合わせた環境。

【最終指示】
アップロードされた画像を分析し、上記のルールに従って、即座にデザイン案の作成を開始してください。 （追加の方向性がある場合は、このプロンプトの後に記述します。）`
        };

        const RATIO_GUIDES = {
            "1": "推奨比率: 3:4 (Portrait)",
            "2": "推奨比率: 1:1 or 4:3",
            "3": "推奨比率: 16:9 (Landscape)",
            "4": "推奨比率: 1:1 (Grid)",
            "5": "推奨比率: 2:1 (Panorama)",
            "6": "推奨比率: 3:2 (Wide)"
        };

        window.onload = () => {
            updateAllPrompts();
        };

        function getSelectedItem(type) {
            const select = document.getElementById(`itemSelect-${type}`);
            const custom = document.getElementById(`customItem-${type}`);
            if (select && custom) {
                const val = custom.value.trim() || select.value;
                return val ? val : null;
            }
            return null;
        }

        function updateItemFromSelect(type) {
            const select = document.getElementById(`itemSelect-${type}`);
            const custom = document.getElementById(`customItem-${type}`);
            if (select && custom && select.value) {
                custom.value = select.value;
                updateSpecificPrompt(type);
            }
        }

        function updateSpecificPrompt(type) {
            const textarea = document.getElementById('display-' + type);
            if (!textarea) return;
            
            const item = getSelectedItem(type);
            let text = "";
            
            if (item) {
                text = `対象アイテム: ${item}\n\n`;
            }
            
            let basePrompt = PROMPTS[type];
            
            if (type === 'model') {
                const countSelect = document.getElementById('itemCount-model');
                const count = countSelect.value;
                basePrompt = basePrompt.replace('[COUNT]', count);
                
                const ratioDisplay = document.getElementById('ratio-guide');
                if (ratioDisplay) {
                    ratioDisplay.innerText = RATIO_GUIDES[count];
                }
            }
            
            textarea.value = text + basePrompt;
        }

        function updateAllPrompts() {
            ['flat', 'product', 'fabric', 'model'].forEach(type => {
                updateSpecificPrompt(type);
            });
        }

        function resetPrompt(type) {
            updateSpecificPrompt(type);
            
            const toast = document.getElementById('toast');
            toast.innerText = "リセットしました";
            showToast();
            setTimeout(() => { toast.innerText = "コピーしました！"; }, 2000);
        }

        function handleCopy(type) {
            const textarea = document.getElementById('display-' + type);
            const content = textarea.value;
            copyToClipboard(content);
            
            const btn = event.currentTarget;
            const originalContent = btn.innerHTML;
            btn.innerHTML = '<span>コピー完了！</span>';
            const originalBg = 'bg-[#18ABA0]';
            btn.classList.replace(originalBg, 'bg-green-600');
            
            setTimeout(() => {
                btn.innerHTML = originalContent;
                btn.classList.replace('bg-green-600', originalBg);
            }, 2000);
        }

        function copyToClipboard(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
                showToast();
            } catch (err) {
                console.error('Copy failed', err);
            }
            document.body.removeChild(textArea);
        }

        function showToast() {
            const toast = document.getElementById('toast');
            toast.style.opacity = '1';
            setTimeout(() => {
                toast.style.opacity = '0';
            }, 2000);
        }

        function filterCards(category) {
            const cards = document.querySelectorAll('.prompt-card');
            const buttons = document.querySelectorAll('header + div button');
            
            buttons.forEach(btn => {
                btn.classList.remove('bg-slate-800', 'text-white');
                btn.classList.add('bg-white', 'text-slate-600', 'border-slate-200');
            });
            
            if (event && event.target.tagName === 'BUTTON') {
                event.target.classList.remove('bg-white', 'text-slate-600', 'border-slate-200');
                event.target.classList.add('bg-slate-800', 'text-white');
            }

            cards.forEach(card => {
                if (category === 'all' || card.getAttribute('data-category') === category) {
                    card.style.display = 'flex';
                } else {
                    card.style.display = 'none';
                }
            });
        }
    </script>
</body>
</html>
